<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ekstremværet Amy</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background:#f0f4f8;
            overflow-x:hidden;
            color:#222;
        }

        .intro {
            height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            background-image: url(images/StormenAmy.png);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color:#fff;
            text-align:center;
            padding:2rem;
            position:relative;
            z-index:10;
        }
        .intro h1 {
            font-size:4.5rem; 
            letter-spacing:1px;
            color: #0a2235;
        }

        .innledning {
            height:105vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            background-color: #0a2235;
            padding:2rem;
            position:relative;
            z-index:10;
        }

        .del1 {
            height:105vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            background-color: #0a2235;
            padding:2rem;
            position:relative;
            z-index:10;
        }

        .del1img {
            height: 600px;
            width: 800px;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(80px);
            transition: all 3s ease-out;
        }

        #map {position:fixed; inset:0; z-index:1;}

        .city-section {
            height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:2rem;
            position:relative;
            z-index:10;
        }
        
        .article {
            background:rgba(255, 255, 255, 0.76);
            width:960px;max-width:94vw;
            padding:3.5rem 4rem;
            border-radius:12px;
            box-shadow:0 30px 80px rgba(0,0,0,.22);
            line-height:1.75;
            font-size:1.22rem;
            color:#111;
        }
        .article-white{box-shadow:0 40px 100px rgba(0,0,0,.3)}
        .byline{
            font-size:2.5rem;
            font-weight:900;
            text-transform:uppercase;
            letter-spacing:1px;
            color:#000;
            margin-bottom:1.8rem;
            text-align:left;
        }
        .text{
            margin-bottom:2rem
        }
        .person{
            display:flex;
            gap:2.5rem;
            margin-top:3rem;
            align-items:flex-start
        }
        .img{
            width:180px;
            height:180px;
            border:8px solid #fff;
            border-radius:8px;
            background:#2c7bb6;
            flex-shrink:0;
            box-shadow:0 10px 30px rgba(0,0,0,.2);
        }
        .info{
            background:#f8f8f8;
            padding:1.4rem 1.6rem;
            border-radius:8px;
            align-self:center;
            min-width:260px;
        }
        .name{
            font-size:1.35rem;
            font-weight:800;
            color:#000;
            margin-bottom:0.3rem
        }
        .age{
            font-size:1.1rem;
            color:#d81b60;
            font-weight:600
        }

        .navsection a {
            margin: 0 20px;
            font-size: 1.4rem;
            color: #11998e;
            text-decoration: none;
            font-weight: 600;
        }
        .navsection a:hover {
            text-decoration: underline; 
        }

        @media(max-width:840px){
            .article{
                padding:2.5rem 2rem
            }
            .byline{
                font-size:2.8rem
            }
            .person{flex-direction:column;
                align-items:center;
                text-align:center
                }
            .info{
                align-self:stretch
            }
        }
    </style>
</head>
<body>

    <div class="intro">
        <h1>Ekstremværet Amy</h1>
    </div>

    <!-- Første innledende artikkel – synlig med en gang -->
    <section class="innledning" id="section-intro-article">
        <div class="article article-white fade-in">
            <h2 class="byline">Amy kommer til Norge</h2>
            <p>Natt til 4. oktober ble Norge rammet av ekstremværet Amy, som førte til store ødeleggelser og kaos over store deler av landet. 
                Meteorologisk institutt klassifiserte uværet som ekstremvær på grunn av de voldsomme vindkastene og enorme nedbørsmengdene som traff store deler av Sør- og Midt-Norge. 
                Med vindkast på opptil 62,1 meter i sekundet og nedbørsmengder på over 120 millimeter enkelte steder, førte Amy til strømbrudd, stengte butikker, 
                innstilte tog og omfattende materielle skader. Totalt er skadene anslått til rundt 2,1 milliarder kroner. 
            </p>
        </div>
    </section>

    <!-- Andre innledende artikkel – også synlig fra start (som du ba om) -->
    <section class="del1" id="section-del1">
        <div class="article article-white">
            <h2 class="byline">Amy kommer til Norge</h2>
            <img src="images/togskade.jpg" alt="togbaneskader" class="del1img">
            <p>
                For å dokumentere hvordan ekstremværet påvirket folk over hele landet, har vi snakket med personer fra ulike byer og tettsteder, 
                fra Bergen til Røros, om hvordan de opplevde stormen Amy.
            </p>
        </div>
    </section>

    <div id="map"></div>

    <!-- By-seksjoner (fade-in når man scroller til dem) -->
    <section class="city-section" id="section-bergen">
        <div class="article">
            <div class="byline">Bergen</div>
            <div class="text">-Jeg var i hybelen min i Bergen da stormen begynte å ta seg opp her i Bergen.
                <p>-Jeg skulle reise til Oslo for å ta fly til Nord Norge den natta det kom inn, Jeg hadde kjøpt urefunderbare billetter med vy. 
                    Etter det så jeg på nyhetene at det kom en anbefaling om å ikke reise, bussen gikk heldigvis, men vi måtte stoppe flere ganger 
                    på grunn av mye vind og trær som falt over veien. Jeg var heldig nok til å komme frem før flyet gikk. 
                    Da jeg kom tilbake fra Nord-Norge så jeg at Naboen min hadde mista en del av taket.
                </p>
            </div>
            <div class="person">
                <img src="images/aleksander.jpg" alt="Aleksander Andersrød" class="img">
                <div class="info">
                    <div class="name">Aleksander Andersrød</div>
                    <div class="age">22 år</div>
                </div>
            </div>
        </div>
    </section>

    <section class="city-section" id="section-kristiansand">
        <div class="article">
            <div class="byline">Kristiansand</div>
            <div class="text">-Jeg fløy inn fra Alicante til Torp, for å komme hjem til Kristiansand. Jeg kom frem til Kristiansand under stormen.
                <p>-Jeg var i fly over Norge under stormen, det var mye turbulens og landingen ble kansellert og krevde en runde rundt for å slippe unna det verste av stormen. 
                    Flybussen til Kristiansand var smått forsinket. Da jeg kom frem til Kristiansand var det mye vind og regn, ikke noe spektakulært uvær. 
                    Dagen etterpå var det en del hagemøbler og søppel rundt i gatene, men det ble ryddet opp i fort.
                </p>
            </div>
            <div class="person">
                <img src="images/emils.jpg" alt="Emil Skatt" class="img">
                <div class="info">
                    <div class="name">Emil Skatt</div>
                    <div class="age">22 år</div>
                </div>
            </div>
        </div>
    </section>

    <section class="city-section" id="section-sarpsborg">
        <div class="article">
            <div class="byline">Sarpsborg</div>
            <div class="text">
                <p>Jeg var hjemme under uværet, jeg var også på jobb senere på dagen.</p>
                <p>Det var en del vind, for det meste kraftig vindkast innimellom. Det var ikke så mye storm her i Sarpsborg, vi ble ikke truffet av det verste av stormen. 
                    Alt av kollektiv trafikk gikk som normalt, ettersom det ikke var noe særlig storm her. Det var ikke noen skader på bygg eller noe annet som jeg er 
                    klar over, så tror ikke det var noe særlig.
                </p>
            </div>
            <div class="person">
                <img src="images/jimmy.jpg" alt="Jimmy Bui" class="img">
                <div class="info">
                    <div class="name">Jimmy Bui</div>
                    <div class="age">23 år</div>
                </div>
            </div>
        </div>
    </section>

    <section class="city-section" id="section-elverum">
        <div class="article">
                <div class="byline">Elverum</div>
                <div class="text">-Jeg var hjemme i kollektivet mitt i Elverum da stormen var her.
                    <p>-Det var ufattelig mye vind, føltes ut som det dro i taket her hjemme. Jeg så en trampoline som hadde landa i en hekk i nabolaget, og 
                        det var nesten ingen folk som var ute i gatene, til og med nesten ingen biler å se på veiene heller. Fikk ikke med meg noe om stans i 
                        kollektivtrafikk eller lignende, annet enn at ingen tog gikk fra nyhetene.
                    </p>
                </div>
            <div class="person">
                <img src="images/emilw.jpg" alt="Emil Woie" class="img">
                <div class="info">
                    <div class="name">Emil Woie</div>
                    <div class="age">22 år</div>
                </div>
            </div>
        </div>
    </section>

    <section class="city-section" id="section-roros">
        <div class="article">
            <div class="byline">Røros</div>
            <div class="text">-Jeg var på tur med en gjeng venner i Femundsmarka Nasjonalpark da Amy var i Norge. Vi visste ikke at det var storm før vi var på vei hjem.
                <p>-Vi merket ikke noe særlig til stormen før vi gikk ut av parken på vei tilbake. Da vi gikk ut til parkeringen hvor bilen vår sto så kjente vi at det blåste 
                    veldig. Det var ikke mer plage annet enn at det var kaldt. Det var først når vi begynte å kjøre hjemover vi merket noe særlig til stormen. Butikker var 
                    stengt hele veien fra Røros til Rena, det var noen trær som hadde blåst ned her og der. Jeg fikk også et fare-varsel på mobil som ble sendt ut av staten.
                </p>
            </div>
            <div class="person">
                <img src="images/syver.jpg" alt="Syver Eriksen" class="img">
                <div class="info"><div class="name">Syver Eriksen</div><div class="age">22 år</div>
                </div>
            </div>
        </div>
    </section>

    <section class="city-section" id="section-trondheim">
        <div class="article">
            <div class="byline">Trondheim</div>
            <div class="text">-Jeg var på jobb på studentsamfunnet under stormen, det er en bar for studenter.
                <p>-Det var ikke så mye å se til skader og lignende, var ett par trær her og der som hadde blåst ned, hoved saklig var det en del søppel 
                    som hadde blåst rundt omkring. En i kollektivet hadde satt ut matavfallet for å tørke det, den forsvant jo, ellers var det litt av 
                    utemøblene våre som hadde blåst bort. Alt av kollektiv trafikk gikk som normal, ellers så var ikke altfor mye å legge merke til, var mye vind da.
                </p>
            </div>
            <div class="person">
                <img src="images/aidan.jpg" alt="Aidan Kostveit" class="img">
                <div class="info">
                    <div class="name">Aidan Janos Kostveit Gabriel</div>
                    <div class="age">23 år</div>
                </div>
            </div>
        </div>
    </section>

    <!-- JAVASCRIPT -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        // Alle artikler starter usynlige og 100px nede...
        gsap.set(".city-section .article", { opacity: 0, y: 100 });

        // ...men de to innledende artiklene skal være fullt synlige fra start
        gsap.set("#section-intro-article .article, #section-del1 .article", { opacity: 1, y: 0 });

        const map = L.map('map', {
            dragging: false, touchZoom: false, doubleClickZoom: false,
            scrollWheelZoom: false, boxZoom: false, keyboard: false, zoomControl: false
        }).setView([61, 9], 6);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap'
        }).addTo(map);

        const proxy = { lat: 61, lng: 9, zoom: 6 };
        gsap.ticker.add(() => map.setView([proxy.lat, proxy.lng], proxy.zoom, { animate: false }));

        const cities = [
            { s: 'section-intro-article', lat: 61,    lng: 9,     zoom: 6 },
            { s: 'section-del1',          lat: 61,    lng: 9,     zoom: 6 },
            { s: 'section-bergen',       lat: 60.392,lng: 5.324, zoom: 12 },
            { s: 'section-kristiansand', lat: 58.146,lng: 7.996, zoom: 12 },
            { s: 'section-sarpsborg',    lat: 59.284,lng: 11.110,zoom: 12 },
            { s: 'section-elverum',      lat: 60.882,lng: 11.562,zoom: 12 },
            { s: 'section-roros',        lat: 62.574,lng: 11.384,zoom: 12 },
            { s: 'section-trondheim',    lat: 63.430,lng: 10.393,zoom: 12 }
        ];

        let current = -1;

        cities.forEach((city, i) => {
            ScrollTrigger.create({
                trigger: `#${city.s}`,
                start: "top center",
                end: "bottom center",
                onEnter: () => { if (i !== current) flyToCity(i); },
                onEnterBack: () => { if (i !== current) flyToCity(i); }
            });
        });

        function flyToCity(i) {
            const city = cities[i];
            const article = document.querySelector(`#${city.s} .article`);

            // De to første (intro + del1) skal ikke animeres inn
            if (i <= 1) {
                gsap.to(proxy, { lat: city.lat, lng: city.lng, zoom: city.zoom, duration: 0 });
                current = i;
                return;
            }

            // Alle by-artiklene får fly-inn + fade-inn
            gsap.set(article, { opacity: 0, y: 100 });

            gsap.to(proxy, {
                lat: city.lat,
                lng: city.lng,
                zoom: city.zoom,
                duration: 2.4,
                ease: "power2.inOut",
                onComplete: () => {
                    gsap.to(article, {
                        opacity: 1,
                        y: 0,
                        duration: 1.2,
                        ease: "power2.out",
                        delay: 0.5
                    });
                }
            });

            current = i;
        }

        // Start på oversikt (ingen animasjon)
        flyToCity(0);
    </script>
</body>
</html>